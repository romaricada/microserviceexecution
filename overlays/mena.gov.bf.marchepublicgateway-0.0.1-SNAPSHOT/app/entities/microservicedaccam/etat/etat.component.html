<div>
    <p-toolbar>
        <div class="ui-g ui-g-12 ui-g-nopad">
            <div class="ui-g-12 ui-md-7  pt-3 pl-3">
                <label class="col-sm-7 font-weight-bold text-primary">GESTION DES ETATS</label>
            </div>
        </div>
    </p-toolbar>
    <p-tabView (onChange)="onIncateurClick($event)">
        <p-tabPanel header="Tous les Marchés" *jhiHasAnyAuthority="'ROLE_MENU_ETATS_ALL'">
            <div>
                <div class="text-center mb-1">
                    <span *ngIf="type === 'AL'" class="badge-pill badge-secondary font-weight-bold">Tous les marchés</span>
                    <span *ngIf="type === 'EX'" class="badge-pill badge-secondary font-weight-bold">Les marchés exécutés</span>
                    <span *ngIf="type === 'EC'" class="badge-pill badge-secondary font-weight-bold">Les marchés en cours</span>
                    <span *ngIf="type === 'EL'" class="badge-pill badge-secondary font-weight-bold">Les marchés en litiges</span>
                    <span *ngIf="type === 'ER'" class="badge-pill badge-secondary font-weight-bold">Les marchés Résiliés</span>
                    <span *ngIf="type === 'D'" class="badge-pill badge-secondary font-weight-bold">Tableau récaputulatif</span>
                </div>
                <p-table [value]="activites" [paginator]="true" [rows]="7" selectionMode="single" [(selection)]="selectedActivite">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="40%">Marchés</th>
                            <th>Date Lancement</th>
                            <th>Date Butoire</th>
                            <th>Budget</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-activite>
                        <tr [pSelectableRow]="activite">
                            <td>{{activite?.codeLignePlan+'-'+activite?.naturePrestationLibelle}}</td>
                            <td>{{activite?.ppmActivite?.periodeLancementAppel | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite?.ppmActivite?.dateButtoire | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite.ppmActivite?.creditDisponible | number}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td colspan="4" align="center"><span class="text-danger"> Aucun marché trouvé ! </span></td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>

            <br>

            <button *ngIf="activites.length" type="button" pButton class="ui-button-secondary text-primary"
                    icon="fa fa-print"
                    label="Imprimer" (click)="imprimeAllMarche()">
            </button>
        </p-tabPanel>
        <p-tabPanel header="Marchés en cours" *jhiHasAnyAuthority="'ROLE_MENU_ETATS_ENCOURS'" >
            <div>
                <!---->
                <div class="text-center mb-1">
                    <span *ngIf="type === 'AL'" class="badge-pill badge-secondary font-weight-bold">Tous les marchés</span>
                    <span *ngIf="type === 'EX'" class="badge-pill badge-secondary font-weight-bold">Les marchés exécutés</span>
                    <span *ngIf="type === 'EC'" class="badge-pill badge-secondary font-weight-bold">Les marchés en cours</span>
                    <span *ngIf="type === 'EL'" class="badge-pill badge-secondary font-weight-bold">Les marchés en litiges</span>
                    <span *ngIf="type === 'ER'" class="badge-pill badge-secondary font-weight-bold">Les marchés Résiliés</span>
                    <span *ngIf="type === 'D'" class="badge-pill badge-secondary font-weight-bold">Tableau récaputulatif</span>
                </div>
                <p-table [value]="activites" [paginator]="true" [rows]="7" selectionMode="single" [(selection)]="selectedActivite">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="40%">Marchés</th>
                            <th>Date Lancement</th>
                            <th>Date Butoire</th>
                            <th>Budget</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-activite>
                        <tr [pSelectableRow]="activite">
                            <td>{{activite?.codeLignePlan+'-'+activite?.naturePrestationLibelle}}</td>
                            <td>{{activite?.ppmActivite?.periodeLancementAppel | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite?.ppmActivite?.dateButtoire | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite.ppmActivite?.creditDisponible | number}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td colspan="4" align="center"><span class="text-danger"> Aucun marché trouvé ! </span></td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>
                <button *ngIf="activites.length" type="button" pButton class="ui-button-secondary text-primary"
                        icon="fa fa-print"
                        label="Imprimer" (click)="imprimeMarchesEnCours()">
                </button>
        </p-tabPanel>
        <p-tabPanel header="Marchés exécutés" *jhiHasAnyAuthority="'ROLE_MENU_ETATS_EXECUTES'">
            <div>
                <div class="text-center mb-1">
                    <span *ngIf="type === 'AL'" class="badge-pill badge-secondary font-weight-bold">Tous les marchés</span>
                    <span *ngIf="type === 'EX'" class="badge-pill badge-secondary font-weight-bold">Les marchés exécutés</span>
                    <span *ngIf="type === 'EC'" class="badge-pill badge-secondary font-weight-bold">Les marchés en cours</span>
                    <span *ngIf="type === 'EL'" class="badge-pill badge-secondary font-weight-bold">Les marchés en litiges</span>
                    <span *ngIf="type === 'ER'" class="badge-pill badge-secondary font-weight-bold">Les marchés Résiliés</span>
                    <span *ngIf="type === 'D'" class="badge-pill badge-secondary font-weight-bold">Tableau récaputulatif</span>
                </div>
                <p-table [value]="activites" [paginator]="true" [rows]="7" selectionMode="single" [(selection)]="selectedActivite">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="40%">Marchés</th>
                            <th>Date Lancement</th>
                            <th>Date Butoire</th>
                            <th>Budget</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-activite>
                        <tr [pSelectableRow]="activite">
                            <td>{{activite?.codeLignePlan+'-'+activite?.naturePrestationLibelle}}</td>
                            <td>{{activite?.ppmActivite?.periodeLancementAppel | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite?.ppmActivite?.dateButtoire | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite.ppmActivite?.creditDisponible | number}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td colspan="4" align="center"><span class="text-danger"> Aucun marché trouvé ! </span></td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>

            <button *ngIf="activites.length" type="button" pButton class="ui-button-secondary text-primary"
                        icon="fa fa-print"
                        label="Imprimer" (click)="imprimeFinishedMarches()">
                </button>
        </p-tabPanel>
        <p-tabPanel header="Marchés ayant un litige" *jhiHasAnyAuthority="'ROLE_MENU_ETATS_LITIGE'">
            <div>
                <!---->
                <div class="text-center mb-1">
                    <span *ngIf="type === 'AL'" class="badge-pill badge-secondary font-weight-bold">Tous les marchés</span>
                    <span *ngIf="type === 'EX'" class="badge-pill badge-secondary font-weight-bold">Les marchés exécutés</span>
                    <span *ngIf="type === 'EC'" class="badge-pill badge-secondary font-weight-bold">Les marchés en cours</span>
                    <span *ngIf="type === 'EL'" class="badge-pill badge-secondary font-weight-bold">Les marchés en litiges</span>
                    <span *ngIf="type === 'ER'" class="badge-pill badge-secondary font-weight-bold">Les marchés Résiliés</span>
                    <span *ngIf="type === 'D'" class="badge-pill badge-secondary font-weight-bold">Tableau récaputulatif</span>
                </div>
                <p-table [value]="activites" [paginator]="true" [rows]="7" selectionMode="single" [(selection)]="selectedActivite">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="40%">Marchés</th>
                            <th>Date Lancement</th>
                            <th>Date Butoire</th>
                            <th>Budget</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-activite>
                        <tr [pSelectableRow]="activite">
                            <td>{{activite?.codeLignePlan+'-'+activite?.naturePrestationLibelle}}</td>
                            <td>{{activite?.ppmActivite?.periodeLancementAppel | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite?.ppmActivite?.dateButtoire | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite.ppmActivite?.creditDisponible | number}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td colspan="4" align="center"><span class="text-danger"> Aucun marché trouvé ! </span></td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>

            <br>

            <button *ngIf="activites.length" type="button" pButton class="ui-button-secondary text-primary"
                        icon="fa fa-print"
                        label="Imprimer" (click)="imprimeMarchesAyantLitige()">
                </button>
        </p-tabPanel>
        <p-tabPanel header="Marchés ayant un contrat résilié" *jhiHasAnyAuthority="'ROLE_MENU_ETATS_RESILIE'">
            <div>
                <!---->
                <div class="text-center mb-1">
                    <span *ngIf="type === 'AL'" class="badge-pill badge-secondary font-weight-bold">Tous les marchés</span>
                    <span *ngIf="type === 'EX'" class="badge-pill badge-secondary font-weight-bold">Les marchés exécutés</span>
                    <span *ngIf="type === 'EC'" class="badge-pill badge-secondary font-weight-bold">Les marchés en cours</span>
                    <span *ngIf="type === 'EL'" class="badge-pill badge-secondary font-weight-bold">Les marchés en litiges</span>
                    <span *ngIf="type === 'ER'" class="badge-pill badge-secondary font-weight-bold">Les marchés Résiliés</span>
                    <span *ngIf="type === 'D'" class="badge-pill badge-secondary font-weight-bold">Tableau récaputulatif</span>
                </div>
                <p-table [value]="activites" [paginator]="true" [rows]="7" selectionMode="single" [(selection)]="selectedActivite">
                    <ng-template pTemplate="header">
                        <tr>
                            <th width="40%">Marchés</th>
                            <th>Date Lancement</th>
                            <th>Date Butoire</th>
                            <th>Budget</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-activite>
                        <tr [pSelectableRow]="activite">
                            <td>{{activite?.codeLignePlan+'-'+activite?.naturePrestationLibelle}}</td>
                            <td>{{activite?.ppmActivite?.periodeLancementAppel | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite?.ppmActivite?.dateButtoire | date:'dd/MM/yyyy'}}</td>
                            <td>{{activite.ppmActivite?.creditDisponible | number}}</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td colspan="4" align="center"><span class="text-danger"> Aucun marché trouvé ! </span></td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>

            <br>

            <button *ngIf="activites.length" type="button" pButton class="ui-button-secondary text-primary"
                        icon="fa fa-print"
                        label="Imprimer" (click)="imprimeMarchesAyantContratResilie()">
                </button>
        </p-tabPanel>
    </p-tabView>
</div>


